# PLANO DE IMPLEMENTAÇÃO: SHD-TOWERWARS
# Contexto: Tower Defense Isométrico Mobile com Evolução Genética e Multiplayer Assíncrono (Ghost System).
# Tecnologias: HTML5 Canvas, JavaScript (ES6+), Firebase Firestore/Hosting, GitHub Actions.

ESTADO ATUAL DO PROJETO:
[x] Repositório GitHub criado e sincronizado.
[x] Estrutura básica de ficheiros (index.html, style.css, game.js).
[x] Configuração inicial do Firebase Firestore e Hosting.
[x] Motor Isométrico funcional.
[x] Lógica de Rondas e Spawning (básica).

================================================================
FASE 1: INFRAESTRUTURA E MOTOR VISUAL (CORE)
================================================================
Status: [CONCLUÍDO]

[x] 1.1 - Refinar Grelha de Perspetiva: Implementar projeção de 1 ponto com conversão de coordenadas (screen-to-grid). Ângulo de câmara ajustável.
[x] 1.2 - Desenho do Caminho Dinâmico: Implementado sistema de geração de percurso a partir de VÉRTICES, permitindo fácil edição de caminhos complexos numa grelha de 15x30.
[x] 1.3 - Divisão de Campo: Visualizar a linha de demarcação (Equador) entre a zona do Jogador e a zona do Ghost.
[x] 1.4 - Responsividade: Garantir que o canvas se ajusta a diferentes rácios de ecrã (Portrait).

================================================================
FASE 2: ENTIDADES E MOVIMENTO
================================================================
Status: [EM ANDAMENTO]

[x] 2.1 - Sistema de Spawning e Movimento: Criada classe 'Monster' com movimento fluido baseado no percurso gerado por vértices. Monstros são gerados a um intervalo de tempo fixo.
[ ] 2.2 - Atributos de Evolução: Implementar o sistema onde cada monstro enviado aumenta o 'Nível de Espécie' (NE).
[ ] 2.3 - Gestão de Vagas: Permitir o envio de monstros durante a ronda ativa.
[~] 2.4 - Lógica de Vida: Perda de HP (100 total) quando monstros atingem a base. (PRÓXIMO PASSO)

================================================================
FASE 3: COMBATE E TORRES (DEFESA/ASSALTO)
================================================================
Status: [EM ANDAMENTO]

[x] 3.1 - Construção de Torres: Implementado sistema de colocação de torres (classe 'Tower') na metade inferior da grelha, com validação de ouro e de posição.
[~] 3.2 - Combate Básico: Torres encontram o monstro mais próximo no seu alcance e causam dano. Barras de vida dos monstros funcionais.
[ ] 3.3 - Mix Tecnológico (Torres):
    - Medieval: Besta de Cerco, Catapulta, Caldeirão de Óleo.
    - Steampunk: Canhão Tesla, Morteiro a Vapor.
    - Futurista: Torre de Prisma, Canhão de Pulso.
[ ] 3.4 - Combate Torre-vs-Torre: Implementar alcance para torres atacarem torres inimigas próximas da linha média.
[ ] 3.5 - Regeneração: Lógica de cura total das torres no fim de cada ronda.

================================================================
FASE 4: ECONOMIA E REGRAS DE RONDA
================================================================
Status: [EM ANDAMENTO]

[~] 4.1 - Ciclo de Ouro: Implementado ouro inicial e custo de construção. (Falta: Renda passiva e bónus).
[~] 4.2 - Gestor de Tempo e Início de Jogo:
    - [x] Botão "Start" para libertar vaga inicial.
    - [ ] Ronda mínima de 30 segundos.
    - [ ] Countdown de 5 segundos após último monstro morrer.
[ ] 4.3 - Menu Colapsável (UI): Implementar gavetas para seleção de 7 torres e 7 monstros.

================================================================
FASE 5: MULTIPLAYER ASSÍNCRONO (GHOST SYSTEM)
================================================================
Status: [PLANEADO]

[ ] 5.1 - Sistema de Gravação: Logar ações (build/spawn) com timestamp e posição.
[ ] 5.2 - Integração Firebase: Salvar JSON do 'Ghost' vitorioso no Firestore.
[ ] 5.3 - Playback: Carregar e executar as ações do Ghost na metade superior do ecrã do novo jogador.
[ ] 5.4 - Lista de Espera (Determinismo): Garantir que o Ghost executa ações assim que tiver ouro suficiente.

================================================================
NOTAS PARA O GEMINI:
- Manter o código modular no game.js.
- Priorizar performance para dispositivos móveis (evitar loops pesados).
- As torres e unidades devem usar o estilo de Mix Tecnológico (Medieval/Steam/Futuro).
- Sempre que completar uma tarefa, marcar com [x] (completo) ou [~] (parcial) neste ficheiro.
================================================================